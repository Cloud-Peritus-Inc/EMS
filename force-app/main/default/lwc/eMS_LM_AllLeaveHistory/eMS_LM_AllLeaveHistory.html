<!--
  @description       : This component is used to show the Leave History in My requests Tab For current Logged in Employee
  @author            : Pavan
  @group             : 
  @last modified on  : 01-02-2023
  @last modified by  : Pavan 08-02-2023
-->
<template>
	<div class="font">
		<lightning-card>
			<lightning-layout multiple-rows>
				<lightning-layout-item padding="around-small" size="3">
					<div>
						<lightning-input type="Date" label="Start Date" value={startDate} onchange={startdatechange}>
						</lightning-input>
					</div>
				</lightning-layout-item>
				<lightning-layout-item padding="around-small" size="3">
					<div>
						<lightning-input type="Date" label="End Date" value={endDate} onchange={enddatechange}>
						</lightning-input>
					</div>
				</lightning-layout-item>
				<lightning-layout-item padding="around-small" size="3">
					<div>
						<c-multi-select-picklist if:true={leaveTypeValues} options={leaveTypeValues}
							onvaluechange={handleTypeValueChange} label="Leave Type" onchange={statusChange}>
						</c-multi-select-picklist>
					</div>
				</lightning-layout-item>
				<lightning-layout-item padding="around-small" size="3">
					<div>
						<c-multi-select-picklist if:true={picklistValues} options={picklistValues}
							onvaluechange={handleValueChange} label="Leave Status" onchange={statusChange}>
						</c-multi-select-picklist>
						<!--c-multi-select-picklist options={selectedList} label="Leave Status"></c-multi-select-picklist-->
					</div>
				</lightning-layout-item>
			</lightning-layout>
			<template if:true={showdata}>
				<lightning-card>
					<table>
						<thead>
							<tr style="border-top:1px solid #d4d4d4;border-bottom:1px solid #d4d4d4">
								<th style="padding:9px">
									<div title="Leave Type">Leave Type</div>
								</th>
								<th>
									<div title="Leave Start Date">Leave Start Date</div>
								</th>
								<th>
									<div title="Leave End Date">Leave End Date</div>
								</th>
								<th>
									<div title="Leave Duration">Leave Duration</div>
								</th>
								<th>
									<div title="Reason">Reason</div>
								</th>
								<th>
									<div title="Approver">Approver</div>
								</th>
								<th>
									<div title="Leave Status">Leave Status</div>
								</th>
								<th>
									<div title="Approved On">Approved On</div>
								</th>
								<th>
									<div title="Actions">Actions</div>
								</th>
							</tr>
						</thead>
						<tbody>
							<template for:each={datahistory} for:item="Req">
								<tr key={Req.Id} style="border-bottom:1px solid #d4d4d4">
									<td style="padding:15px">
										<div class="slds-truncate dv-dynamic-width" style={fixedWidth}>
											{Req.EMS_LM_Leave_Type_Name__c }</div>
									</td>
									<td>
										<div class="slds-truncate dv-dynamic-width" style={fixedWidth}>
											<lightning-formatted-date-time value={Req.EMS_LM_Leave_Start_Date__c}
												month="numeric" day="numeric" year="numeric">
											</lightning-formatted-date-time>		
										</div>
									</td>
									<td>
										<div class="slds-truncate dv-dynamic-width" style={fixedWidth}>
											<lightning-formatted-date-time value={Req.EMS_LM_Leave_End_Date__c}
												month="numeric" day="numeric" year="numeric">
											</lightning-formatted-date-time>
											</div>
									</td>
									<td>
										<div class="slds-truncate dv-dynamic-width" style={fixedWidth}>
											{Req.EMS_LM_Leave_Duration__c}</div>
									</td>
									<td>
										<div class="slds-truncate dv-dynamic-width" style={fixedWidth}>
											{Req.EMS_LM_Reason__c}</div>
									</td>
									<td>
										<div class="slds-truncate dv-dynamic-width" style={fixedWidth}>
											{Req.EMS_LM_Current_Approver__c}</div>
									</td>
									<td>
										<div class="slds-truncate dv-dynamic-width" style={fixedWidth}>
											{Req.EMS_LM_Status__c}</div>
									</td>
									<td>
										<div class="slds-truncate dv-dynamic-width" style={fixedWidth}>
											{Req.EMS_LM_Approved_On__c}</div>
									</td>
									<td>
										<lightning-button-icon size="large" variant="bare" icon-name="utility:preview"
											alternative-text="view" onclick={handleView} data-id={Req.Id}
											class="changeIconColorView">
										</lightning-button-icon>
										&nbsp;&nbsp;
										<lightning-button-icon size="large" variant="bare" icon-name="action:edit"
											alternative-text="Edit" onclick={handleEdit} data-id={Req.Id}
											disabled={Req.disableButton}></lightning-button-icon>
										&nbsp; &nbsp;
										<lightning-button-icon size="large" variant="bare"
											icon-name="utility:cancel_file_request" alternative-text="cancel"
											class="cancel" onclick={handleCancel} data-id={Req.Id}
											disabled={Req.disableButton}>
										</lightning-button-icon>

										<!--lightning-button-icon size="large" variant="bare" alternative-text="view"
											onclick={handleView} data-id={Req.Id} icon-name="action:view">
										</lightning-button-icon>
										&nbsp;&nbsp;
										<lightning-button-icon size="large" variant="bare" icon-name="action:edit"
											alternative-text="Edit" onclick={handleEdit} data-id={Req.Id}
											disabled={Req.disableButton}></lightning-button-icon>
										&nbsp; &nbsp;
										<lightning-button-icon size="large" variant="bare"
											icon-name="utility:cancel_file_request" alternative-text="cancel"
											class="cancel" onclick={handleCancel} data-id={Req.Id}
											disabled={Req.disableButton}>
										</lightning-button-icon-->

										<!--div class="iconContainer redColor" onclick={handleView} data-id={Req.Id}>
											<svg class="slds-button__icon slds-button__icon_large" focusable="false"
												data-key="preview" aria-hidden="true" viewBox="0 0 52 52" part="icon">
												<g>
													<g>
														<path
															d="M51.8 25.1C47.1 15.6 37.3 9 26 9S4.9 15.6.2 25.1c-.3.6-.3 1.3 0 1.8C4.9 36.4 14.7 43 26 43s21.1-6.6 25.8-16.1c.3-.6.3-1.2 0-1.8zM26 37c-6.1 0-11-4.9-11-11s4.9-11 11-11 11 4.9 11 11-4.9 11-11 11z">
														</path>
														<path
															d="M26 19c-3.9 0-7 3.1-7 7s3.1 7 7 7 7-3.1 7-7-3.1-7-7-7z">
														</path>
													</g>
												</g>
											</svg>
										</div>

										<div class="iconContainer blueColor" onclick={handleEdit} data-id={Req.Id} disabled={Req.disableButton}>
											<svg class="slds-button__icon slds-button__icon_large" focusable="false"
												data-key="edit" aria-hidden="true" viewBox="0 0 52 52" part="icon">
												<g>
													<g>
														<path
															d="M48.8 7.4l-4.2-4.2c-1.6-1.6-4.1-1.6-5.6 0l-3.3 3.3c-.4.4-.4 1 0 1.4l8.5 8.5c.4.4 1 .4 1.4 0l3.3-3.3c1.5-1.6 1.5-4.1-.1-5.7zM32.9 10.7c-.4-.4-1-.4-1.4 0L5.4 36.8 2.1 48.1c-.3 1.1.7 2.2 1.8 1.9l11.4-3.2h-.1l26.1-26.1c.4-.4.4-1 0-1.4l-8.4-8.6z">
														</path>
													</g>
												</g>
											</svg>
										</div>

										<div class="iconContainer blueColor" onclick={handleCancel} data-id={Req.Id} disabled={Req.disableButton}>
											<svg class="slds-button__icon slds-button__icon_large" focusable="false"
												data-key="cancel_file_request" aria-hidden="true" viewBox="0 0 52 52"
												part="icon">
												<g>
													<g>
														<path
															d="M28.6 11.4h5.1c.6 0 1.1-.5 1.1-1.1 0-.3-.1-.5-.3-.8l-7.2-7.1c-.2-.2-.4-.3-.7-.3-.6 0-1.1.5-1.1 1.1v5.1c0 1.7 1.4 3.1 3.1 3.1z">
														</path>
														<path
															d="M24.6 40.6c0-6.8 4.2-12.6 10.2-14.9v-8.1c0-.9-.7-1.6-1.6-1.6h-7.8c-2.6 0-4.7-2.1-4.7-4.6V3.6c.1-.8-.6-1.5-1.5-1.5H6.8c-2.6 0-4.7 2.1-4.7 4.6v29.4c0 2.6 2.1 4.6 4.7 4.6h17.8v-.1zM31.8 34.6l6 6-6 6c-.6.6-.6 1.6 0 2.1l.7.7c.6.6 1.6.6 2.1 0l6-6 6 6c.6.6 1.6.6 2.1 0l.7-.7c.6-.6.6-1.6 0-2.1l-6-6 6-6c.6-.6.6-1.6 0-2.1l-.7-.7c-.6-.6-1.6-.6-2.1 0l-6 6-6-6c-.6-.6-1.6-.6-2.1 0l-.7.7c-.6.5-.6 1.5 0 2.1z">
														</path>
													</g>
												</g>
											</svg>
										</div-->
										<!--lightning-button variant="brand" label="View" onclick={handleView}
											data-id={Req.Id}>
										</lightning-button> &nbsp;-->
										<!--lightning-button variant="Success" label="Edit" onclick={handleEdit}
											data-id={Req.Id} disabled={Req.disableButton}>
										</lightning-button>&nbsp;-->
										<!--lightning-button variant="destructive" label="Cancel" onclick={handleCancel}
											data-id={Req.Id} disabled={Req.disableButton}>
										</lightning-button -->
									</td>
								</tr>
							</template>
						</tbody>
					</table>
				</lightning-card>
			</template>
		</lightning-card>
		<template if:true={nodata}>
			<h2> No Requests Found. </h2>
		</template>
		<template if:true={showApplyLeaveEdit}>
			<c-e-m-s-_-l-m-_-editapply-new oncloseleave={cancelHandler} selecteditrecordid={selectEditRecordId}>
			</c-e-m-s-_-l-m-_-editapply-new>
		</template>
	</div>
</template>