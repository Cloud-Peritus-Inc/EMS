<template>
  <lightning-card>
     <div class="tableFixHead">
    <table class="slds-table_cell-buffer slds-no-row-hover slds-table_bordered fixed_header" >
      <thead>
        <tr  style="color:lightcoral">
          <th class="slds-border_right tableheading" scope="col">
            <div class="slds-truncate" title="Mentee">Mentee</div>
          </th>
          <th class="slds-border_right tableheading" scope="col">
            <div class="slds-truncate" title="Mentee Role">Mentee Role</div>
          </th>
          <th class="slds-border_right tableheading" scope="col">
            <div class="" title="Project">Project</div>
          </th>
          <th class="slds-border_right tableheading" scope="col">
            <div class="slds-truncate" title="Project Manager/Other">Project Manager/Other</div>
          </th>
          <th class="slds-border_right tableheading" scope="col">
            <div class="slds-truncate" title="KRA Status">KRA Status</div>
          </th>
          <template if:true={disablecolumn}>
          <th class="slds-border_right tableheading recallColumn" scope="col">
            <div class="slds-truncate" title="Recall Reason">Recall Reason</div>
          </th>
          </template>
          <template if:true={disablecolumn}>
           <th class="slds-border_right tableheading" scope="col">
            <div class="slds-truncate" title="Action">Action</div>
          </th>
          </template>
        
        </tr>
      </thead>

      <tbody>

        <template if:true={showPMRequestRecords}>
          <template for:each={pmRequestTable} for:item="goalwrap">
            <tr key={goalwrap.projectConId}>
              <td>
                <div class="slds-wrap" style="width:100px;word-wrap:break-word;">
                  <p>{goalwrap.mentee}</p>
                </div>
              </td>
              
              <td>
                <div class="slds-wrap">{goalwrap.menteeRole}</div>
              </td>
              <td>
                <div class="slds-wrap">{goalwrap.project}</div>
              </td>
              <td>
                <div class="slds-wrap">{goalwrap.projectManager}</div>
              </td>
               <td>
                <div class="slds-wrap">{goalwrap.kraStatus}</div>
              </td>
               <template if:true={disablecolumn}> 
              <td>
                <div class="slds-wrap">{goalwrap.recall_Reason}</div>
              </td>
            
             <td>               
              <lightning-button variant="brand-outline" label="Recall" title="Recall" onclick={HandlerecallRowAction} disabled ={goalwrap.hideRecallButton}
               data-projectid ={goalwrap.projectId} data-managerid ={goalwrap.projectManagerId}
                data-kraid ={goalwrap.kraId}  class="slds-m-right_small"></lightning-button>
             </td>
             </template>
            </tr>
          </template>
        </template>
      </tbody>
    </table>
       <template if:false={showPMRequestRecords}>
          <div class="slds-text-align_center slds-p-around_medium">
            <center>No KRA feedback requests found.</center>
          </div>
        </template>

        <template if:true={isShowPopUp}>
										<section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01"
											aria-modal="true" aria-describedby="modal-content-id-1"
											class="slds-modal slds-fade-in-open">
											<div class="slds-modal__container">
												<header class="slds-modal__header">
													<button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={hideModalBox}>
                										<lightning-icon icon-name="utility:close"
                   														alternative-text="close"
                   														variant="inverse"
                   														size="small" ></lightning-icon>
                													<span class="slds-assistive-text">Close</span>
             										</button>
													<h2 id="modal-heading-01"
														class="slds-text-heading_medium slds-hyphenate">Recall Reason</h2>
												</header>
												<div class="slds-modal__content slds-p-around_medium"  id="modal-content-id-1">
													<lightning-textarea class="rreason" variant="label-stacked" required label="Enter Recall Reason" value={comment} onchange={handleCommentChange}></lightning-textarea>
                          
                          <p><b>Note:</b> Submitting a recall for a feedback request will result in the cancellation of the request.</p>

													<!-- smaske : PM_Def_098 : Removed the error msg paragraph from as showing toast msg -->
												</div>
												<footer class="slds-modal__footer">
													<!-- smaske : PM_Def_098 : Replacing html button with lwc button -->
                          <lightning-button label="Close" title="Close" onclick={hideModalBox} class="slds-m-left_x-medium"></lightning-button>&nbsp;&nbsp;
													<lightning-button variant="brand" label="Submit" title="Submit" onclick={handleRejectionSubmission} ></lightning-button>
												</footer>
											</div>
										</section>
										<div class="slds-backdrop slds-backdrop_open"></div>
									</template>
  </div>
</lightning-card>
</template>